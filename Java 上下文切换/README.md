## Java 上下文切换
　　CPU 允许每个线程执行一段时间，然后重新选择一个线程来执行，这个时间通常是几十毫秒。比如线程 A 执行了 30 毫秒，然后切换到线程 B 执行 30 毫秒，再切换到线程 C 等，通过不停切换线程来达到多线程的效果。<br />
　　但这会导致原子性问题，以 count += 1 为例，在 CPU 中是有三条指令的，分别是读入数据到 CPU 内存中、执行 +1 操作、写回数据到 CPU 的写缓存中（最后会批量写入电脑内存）。于是，上下文切换可能导致线程 A 在执行 count+=1 语句时，执行到第二条指令时，就进行切换了，导致出问题。<br />
　　注意，在 32 位机器上，对 long 类型操作也是需要多条指令的，因为 long 类型是 64 位的，无法保证原子性。